<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<script type="text/javascript" src="../bower_components/instafeed.js/instafeed.min.js"></script>
<link rel="import" href="styles/shared-styles.html">

<dom-module id="view-home">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      .hero {
        width: 100%;
        max-width: 100%;
        height: auto;
      }

      .hero__headline {
        font: 400 24px/32px "Poppins", sans-serif;
        color: var(--cardinal-red);
        margin: 0;
      }

      .hero__headline small {
        font-size: 12px;
      }

      .hero__subheadline {
        font: 400 20px/28px "Open Sans", sans-serif;
        color: var(--cardinal-navy);
        margin: 0;
      }

      .hero-header {
        width: 100%;
        max-width: 100%;
        height: 200px;
        margin: 20px 0;
        background: url('../images/hero.jpg')no-repeat fixed top center;
        -webkit-background-size: cover;
             -o-background-size: cover;
                background-size: cover;
      }

      .instagram-icon {
        display: block;
        width: 48px;
        height: 48px;
        margin-bottom: 16px;
      }

      .instagram__fill {
        fill: var(--cardinal-navy);
      }

      .instagram__feed {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-align-items: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
        -webkit-flex-direction: row;
        -moz-flex-direction: row;
        -ms-flex-direction: row;
        -o-flex-direction: row;
        flex-direction: row;
      }

      .instagram__photo {
        width: 23.5%;
        margin: 0 2% 20px 0;
      }

      .instagram__photo:nth-of-type(n + 4) {
        margin-right: 0;
      }

      .instagram__photo img {
        width: 100%;
        max-width: 100%;
        height: auto;
      }

      @media screen and (max-width: 900px) {
        .instagram__photo {
          width: 32%;
          margin: 0 2% 16px 0;
        }

        .instagram__photo:nth-of-type(n + 3) {
          margin-right: 0;
        }
      }

      @media screen and (max-width: 600px) {
        .instagram__photo {
          width: 49%;
          margin: 0 2% 16px 0;
        }

        .instagram__photo:nth-of-type(n + 3) {
          margin-right: 2%;
        }

        .instagram__photo:nth-of-type(even) {
          margin-right: 0;
        }
      }

    </style>

    <div class="card">
      <h1 class="hero__headline">June 10, 2017 - 1st Practice <small>*could be June 11</small></h1>
      <h2 class="hero__subheadline">Time and Location TBD</h2>

      <div class="hero-header"></div>

      <svg class="instagram-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
        <g id="instagram">
          <path class="instagram__fill" d="M21.8,20.7c0,0.4-0.4,0.7-0.8,0.7H3c-0.4,0-0.7-0.3-0.8-0.7V9.8h3c-0.4,0.7-0.6,1.4-0.5,2.2c0.1,4,3.5,7.2,7.6,7
            c3.8-0.1,6.9-3.2,7-7c0.1-0.8-0.1-1.5-0.6-2.2h3L21.8,20.7L21.8,20.7z M12,7.6c2.4,0.1,4.4,2.2,4.3,4.6s-2.2,4.4-4.6,4.3
            c-2.4-0.1-4.3-2-4.3-4.4C7.5,9.5,9.5,7.5,12,7.6z M17.3,4.1c0-0.4,0.3-0.7,0.7-0.7h2.2c0.4,0,0.7,0.3,0.7,0.7v2.2
            c0,0.4-0.3,0.7-0.7,0.7H18c-0.4,0-0.7-0.3-0.7-0.7V4.1z M21.1,0.4H2.9C1.3,0.4,0,1.6,0,3.2v17.6c0,1.5,1.3,2.8,2.9,2.7h18.3
            c1.5,0,2.8-1.2,2.9-2.7c0,0,0,0,0,0V3.2C24,1.6,22.7,0.4,21.1,0.4C21.2,0.4,21.1,0.4,21.1,0.4z M21.8,20.7c0,0.4-0.4,0.7-0.8,0.7H3
            c-0.4,0-0.7-0.3-0.8-0.7V9.8h3c-0.4,0.7-0.6,1.4-0.5,2.2c0.1,4,3.5,7.2,7.6,7c3.8-0.1,6.9-3.2,7-7c0.1-0.8-0.1-1.5-0.6-2.2h3
            L21.8,20.7L21.8,20.7z M12,7.6c2.4,0.1,4.4,2.2,4.3,4.6c-0.1,2.4-2.2,4.4-4.6,4.3c-2.4-0.1-4.3-2-4.3-4.4C7.5,9.5,9.5,7.5,12,7.6
            L12,7.6z M17.3,4.1c0-0.4,0.3-0.7,0.7-0.7h2.2c0.4,0,0.7,0.3,0.7,0.7v2.2c0,0.4-0.3,0.7-0.7,0.7H18c-0.4,0-0.7-0.3-0.7-0.7V4.1z
             M21.1,0.4H2.9C1.3,0.4,0,1.6,0,3.2v17.6c0,1.5,1.3,2.8,2.9,2.7h18.3c1.5,0,2.8-1.2,2.9-2.7c0,0,0,0,0,0V3.2
            C24,1.6,22.7,0.4,21.1,0.4C21.2,0.4,21.1,0.4,21.1,0.4L21.1,0.4z"/>
        </g>
      </svg>
      
      <div class="instagram__feed">
        <template is="dom-repeat" items="{{responseData}}" as="picture">
          <a href="{{picture.link}}" class="instagram__photo" target="_blank">
            <img src="{{picture.images.standard_resolution.url}}" alt="Cardinals 2017">
          </a>
        </template>
      </div>
    </div>

  </template>

  <script>
    Polymer({
      is: 'view-home',

      properties: {
        responseData: {
          type: Array,
          value: function() {return [];}
        }
      },

      ready: function() {
        var feed = new Instafeed({
          get: 'user',
          userId: '1822534752',
          accessToken: '1822534752.6430ac4.5b58c8d97ae24db1b4860bc2b9b4cf78',
          mock: true,
          success: function(obj) {
            this._setupResponseData(obj.data);
          }.bind(this)
        }).run();
      },

      _setupResponseData(data) {
        var tagged = data.filter(function(picture) {
          var boolean = picture.tags.some(function(tag) {
            return tag === 'dags'
          });
          return boolean === true;
        });
        this.responseData = tagged;
      }
    });
  </script>
</dom-module>
